From 5a675fead01367f9fc8f7d12302ceb6855a1b2f5 Mon Sep 17 00:00:00 2001
From: Andreas Dinter <andreas.dinter@systec-electronic.com>
Date: Tue, 6 Feb 2024 11:54:06 +0100
Subject: [PATCH 03/13] arch/arm/dts/k3-am625-sk.dts: Enable CLKOUT0 to supply
 network phy's (EXT_REFCLK1.CLKOUT0)

Signed-off-by: Andreas Dinter <andreas.dinter@systec-electronic.com>
---
 arch/arm/dts/k3-am625-sk.dts | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/arch/arm/dts/k3-am625-sk.dts b/arch/arm/dts/k3-am625-sk.dts
index ee8a9fc3aa6..e0d5bcd88ac 100644
--- a/arch/arm/dts/k3-am625-sk.dts
+++ b/arch/arm/dts/k3-am625-sk.dts
@@ -123,6 +123,12 @@
 		>;
 	};
 
+	ext_refclk0_clkout0: ext-refclk0-clkout0 {
+		pinctrl-single,pins = <
+			AM62X_IOPAD(0x01f0, PIN_OUTPUT, 5) /* (A18) EXT_REFCLK1.CLKOUT0 */
+		>;
+	};
+
 	ospi0_pins_default: ospi0-default-pins {
 		bootph-all;
 		pinctrl-single,pins = <
@@ -175,7 +181,10 @@
 &cpsw3g {
 	pinctrl-names = "default";
 	pinctrl-0 = <&main_rgmii1_pins_default
-		     &main_rgmii2_pins_default>;
+		     &main_rgmii2_pins_default
+			 &ext_refclk0_clkout0>;
+	assigned-clocks = <&k3_clks 157 20>;
+	assigned-clock-parents = <&k3_clks 157 22>;
 
 	cpts@3d000 {
 		/* MAP HW3_TS_PUSH to GENF1 */
-- 
2.47.0

