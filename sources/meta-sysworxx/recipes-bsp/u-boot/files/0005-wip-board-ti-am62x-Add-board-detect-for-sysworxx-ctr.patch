From ab7884ff5237a25b4aacf066e60c9845fbb09811 Mon Sep 17 00:00:00 2001
From: Andreas Dinter <andreas.dinter@systec-electronic.com>
Date: Mon, 5 Feb 2024 13:48:07 +0100
Subject: [PATCH 5/5] [wip] board/ti/am62x: Add board detect for sysworxx ctr

Signed-off-by: Andreas Dinter <andreas.dinter@systec-electronic.com>
---
 board/ti/am62x/am62x.env | 2 ++
 board/ti/am62x/evm.c     | 3 +++
 2 files changed, 5 insertions(+)

diff --git a/board/ti/am62x/am62x.env b/board/ti/am62x/am62x.env
index e507ca276c..a9eff90cdc 100644
--- a/board/ti/am62x/am62x.env
+++ b/board/ti/am62x/am62x.env
@@ -20,6 +20,8 @@ findfdt=
 			setenv name_fdt ti/k3-am62-lp-sk.dtb; fi;
 	if test $board_name = am62x_beagleplay; then
 			setenv name_fdt ti/k3-am625-beagleplay.dtb; fi;
+	if test $board_name = am62x_sysworxx_ctr; then
+			setenv name_fdt ti/k3-am623-systec-ctr700-rev2.dtb; fi;
 	setenv fdtfile ${name_fdt}
 name_kern=Image
 console=ttyS2,115200n8
diff --git a/board/ti/am62x/evm.c b/board/ti/am62x/evm.c
index df092ef36d..f165186dd6 100644
--- a/board/ti/am62x/evm.c
+++ b/board/ti/am62x/evm.c
@@ -52,6 +52,7 @@ static struct gpio_desc board_det_gpios[AM62X_LPSK_BRD_DET_COUNT];
 #define board_is_am62x_lp_skevm()  board_ti_k3_is("AM62-LP-SKEVM")
 #define board_is_am62x_sip_skevm()  board_ti_k3_is("AM62SIP-SKEVM")
 #define board_is_am62x_play()	board_ti_k3_is("BEAGLEPLAY-A0-")
+#define board_is_am62x_sysworxx_ctr()	board_ti_k3_is("sysWORXX-CTR")
 
 #if CONFIG_IS_ENABLED(SPLASH_SCREEN)
 static struct splash_location default_splash_locations[] = {
@@ -283,6 +284,8 @@ static void setup_board_eeprom_env(void)
 		name = "am62x_sip_skevm";
 	else if (board_is_am62x_play())
 		name = "am62x_beagleplay";
+	else if (board_is_am62x_sysworxx_ctr())
+		name = "am62x_sysworxx_ctr";
 	else
 		printf("Unidentified board claims %s in eeprom header\n",
 		       board_ti_get_name());
-- 
2.43.0

